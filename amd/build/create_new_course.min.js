define(["jquery","core/ajax","core/templates","core/notification","core/str","tool_supporter/load_information"],function(l,o,e,s,n,t){return{togglePasswordInput:function(){l("#new_course_enable_self").on("click",function(){l("#new_course_self_password").prop("disabled",!this.checked)})},showNewCourse:function(){l("#btn_show_new_course").on("click",function(){l('[data-region="create_new_course_section"]').toggle()})},createNewCourse:function(){l("#create_new_course_button").on("click",function(){var e=o.call([{methodname:"tool_supporter_create_new_course",args:{shortname:l("#new_course_short_name_input")[0].value,fullname:l("#new_course_full_name_input")[0].value,visible:l("#new_course_is_visible").is(":checked"),categoryid:l("#new_course_category_input")[0].value,activateselfenrol:l("#new_course_enable_self").is(":checked"),selfenrolpassword:l("#new_course_self_password")[0].value,startdate:l("#new_course_startdate_input")[0].value,enddate:l("#new_course_enddate_input")[0].value}}],!0,!0);e[0].done(function(e){t.showCourseDetail(e.id,!0)[0].done(function(e){l('[data-region="create_new_course_section"]').hide(),l("#courseTable").DataTable().row.add({id:e.courseDetails.id,shortname:e.courseDetails.shortname,fullname:e.courseDetails.fullname,level_one:e.courseDetails.level_one,level_two:e.courseDetails.level_two,level_three:e.courseDetails.level_three,level_four:e.courseDetails.level_four,level_five:e.courseDetails.level_five,visible:+e.courseDetails.visible}).draw(!1)})}),e[0].fail(function(r){n.get_string("error","error").done(function(t){n.get_string("ok","moodle").done(function(o){var e=l("#new_course_short_name_input")[0].value;n.get_string("shortnametaken","error",e).done(function(e){e="Possible problem: "+e+"<br><br>";r.message&&(e+="Error-Message:<br>"+r.message+"<br><br>"),r.debuginfo&&(e+="Debuginfo:<br>"+r.debuginfo+"<br><br>"),s.alert(t,e,o)})})})})})},duplicateCourse:function(){l("#duplicate_course_button").on("click",function(){var e=o.call([{methodname:"tool_supporter_duplicate_course",args:{courseid:l("#selectedcourseid")[0].textContent}}]);n.get_string("beingduplicated","tool_supporter").done(function(e){s.addNotification({message:e,type:"info"})}),e[0].done(function(e){t.showCourseDetail(e.id,!0)[0].done(function(e){l("#courseTable").DataTable().row.add({id:e.courseDetails.id,shortname:e.courseDetails.shortname,fullname:e.courseDetails.fullname,level_one:e.courseDetails.level_one,level_two:e.courseDetails.level_two,level_three:e.courseDetails.level_three,level_four:e.courseDetails.level_four,level_five:e.courseDetails.level_five,visible:+e.courseDetails.visible}).draw(!1)})}).fail(s.exception)})}}});