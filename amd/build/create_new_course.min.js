define(["jquery","core/ajax","core/templates","core/notification","core/str","tool_supporter/load_information"],function(s,o,e,l,n,t){return{togglePasswordInput:function(){s("#new_course_enable_self").on("click",function(){s("#new_course_self_password").prop("disabled",!this.checked)})},showNewCourse:function(){s("#btn_show_new_course").on("click",function(){s('[data-region="create_new_course_section"]').toggle()})},createNewCourse:function(){s("#create_new_course_button").on("click",function(){var e=o.call([{methodname:"tool_supporter_create_new_course",args:{shortname:s("#new_course_short_name_input")[0].value,fullname:s("#new_course_full_name_input")[0].value,visible:s("#new_course_is_visible").is(":checked"),categoryid:s("#new_course_category_input")[0].value,activateselfenrol:s("#new_course_enable_self").is(":checked"),selfenrolpassword:s("#new_course_self_password")[0].value,startdate:s("#new_course_startdate_input")[0].value,enddate:s("#new_course_enddate_input")[0].value}}],!0,!0);e[0].done(function(e){t.showCourseDetail(e.id,!0)[0].done(function(e){s('[data-region="create_new_course_section"]').hide(),s("#courseTable").DataTable().row.add({id:e.courseDetails.id,shortname:e.courseDetails.shortname,fullname:e.courseDetails.fullname,level_one:e.courseDetails.level_one,level_two:e.courseDetails.level_two,level_three:e.courseDetails.level_three,level_four:e.courseDetails.level_four,level_five:e.courseDetails.level_five,startdate:e.courseDetails.startdate,visible:+e.courseDetails.visible}).draw(!1)})}),e[0].fail(function(r){n.get_string("error","error").done(function(t){n.get_string("ok","moodle").done(function(o){var e=s("#new_course_short_name_input")[0].value;n.get_string("shortnametaken","error",e).done(function(e){e="Possible problem: "+e+"<br><br>";r.message&&(e+="Error-Message:<br>"+r.message+"<br><br>"),r.debuginfo&&(e+="Debuginfo:<br>"+r.debuginfo+"<br><br>"),l.alert(t,e,o)})})})})})},duplicateCourse:function(){s("#duplicate_course_button").on("click",function(){var e=o.call([{methodname:"tool_supporter_duplicate_course",args:{courseid:s("#selectedcourseid")[0].textContent}}]);n.get_string("beingduplicated","tool_supporter").done(function(e){l.addNotification({message:e,type:"info"})}),e[0].done(function(e){t.showCourseDetail(e.id,!0)[0].done(function(e){s("#courseTable").DataTable().row.add({id:e.courseDetails.id,shortname:e.courseDetails.shortname,fullname:e.courseDetails.fullname,level_one:e.courseDetails.level_one,level_two:e.courseDetails.level_two,level_three:e.courseDetails.level_three,level_four:e.courseDetails.level_four,level_five:e.courseDetails.level_five,startdate:e.courseDetails.startdate,visible:+e.courseDetails.visible}).draw(!1)})}).fail(l.exception)})}}});