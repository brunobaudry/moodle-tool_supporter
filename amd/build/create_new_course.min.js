/**
 * This modules creates helper functions for creating a course
 *
 * @module     tool_supporter/create_new_course
 * @copyright  2019 Benedikt Schneider
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 * @since      3.1.1
 */
define("tool_supporter/create_new_course",["jquery","core/ajax","core/templates","core/notification","core/str","tool_supporter/load_information"],(function($,ajax,templates,notification,str,loadInformation){return{togglePasswordInput:function(){$("#new_course_enable_self").on("click",(function(){$("#new_course_self_password").prop("disabled",!this.checked)}))},showNewCourse:function(){$("#btn_show_new_course").on("click",(function(){$('[data-region="create_new_course_section"]').toggle()}))},createNewCourse:function(){$("#create_new_course_button").on("click",(function(){var promises=ajax.call([{methodname:"tool_supporter_create_new_course",args:{shortname:$("#new_course_short_name_input")[0].value,fullname:$("#new_course_full_name_input")[0].value,visible:$("#new_course_is_visible").is(":checked"),categoryid:$("#new_course_category_input")[0].value,activateselfenrol:$("#new_course_enable_self").is(":checked"),selfenrolpassword:$("#new_course_self_password")[0].value,startdate:$("#new_course_startdate_input")[0].value,enddate:$("#new_course_enddate_input")[0].value}}],!0,!0);promises[0].done((function(data){loadInformation.showCourseDetail(data.id,!0)[0].done((function(data){$('[data-region="create_new_course_section"]').hide(),$("#courseTable").DataTable().row.add({id:data.courseDetails.id,shortname:data.courseDetails.shortname,fullname:data.courseDetails.fullname,level_one:data.courseDetails.level_one,level_two:data.courseDetails.level_two,visible:+data.courseDetails.visible}).draw(!1)}))})),promises[0].fail((function(error){str.get_string("error","error").done((function(errorString){str.get_string("ok","moodle").done((function(accept){var wantedShortname=$("#new_course_short_name_input")[0].value;str.get_string("shortnametaken","error",wantedShortname).done((function(shortnametakenString){var errorMessage="Possible problem: "+shortnametakenString+"<br><br>";error.message&&(errorMessage+="Error-Message:<br>"+error.message+"<br><br>"),error.debuginfo&&(errorMessage+="Debuginfo:<br>"+error.debuginfo+"<br><br>"),notification.alert(errorString,errorMessage,accept)}))}))}))}))}))},duplicateCourse:function(){$("#duplicate_course_button").on("click",(function(){var promises=ajax.call([{methodname:"tool_supporter_duplicate_course",args:{courseid:$("#selectedcourseid")[0].textContent}}]);str.get_string("beingduplicated","tool_supporter").done((function(beingduplicatedstring){notification.addNotification({message:beingduplicatedstring,type:"info"})})),promises[0].done((function(data){loadInformation.showCourseDetail(data.id,!0)[0].done((function(data){$("#courseTable").DataTable().row.add({id:data.courseDetails.id,shortname:data.courseDetails.shortname,fullname:data.courseDetails.fullname,level_one:data.courseDetails.level_one,level_two:data.courseDetails.level_two,visible:+data.courseDetails.visible}).draw(!1)}))})).fail(notification.exception)}))}}}));

//# sourceMappingURL=create_new_course.min.js.map