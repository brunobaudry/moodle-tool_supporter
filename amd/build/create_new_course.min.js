define(["jquery","core/ajax","core/templates","core/notification","core/str","tool_supporter/load_information"],function(r,o,e,s,a,t){return{togglePasswordInput:function(){r("#new_course_enable_self").on("click",function(){r("#new_course_self_password").prop("disabled",!this.checked)})},showNewCourse:function(){r("#btn_show_new_course").on("click",function(){r('[data-region="create_new_course_section"]').toggle()})},createNewCourse:function(){r("#create_new_course_button").on("click",function(){var e=o.call([{methodname:"tool_supporter_create_new_course",args:{shortname:r("#new_course_short_name_input")[0].value,fullname:r("#new_course_full_name_input")[0].value,visible:r("#new_course_is_visible").is(":checked"),categoryid:r("#new_course_category_input")[0].value,activateselfenrol:r("#new_course_enable_self").is(":checked"),selfenrolpassword:r("#new_course_self_password")[0].value,startdate:r("#new_course_startdate_input")[0].value,enddate:r("#new_course_enddate_input")[0].value}}],!0,!0);e[0].done(function(e){t.showCourseDetail(e.id,!0)[0].done(function(e){r('[data-region="create_new_course_section"]').hide(),r("#courseTable").DataTable().row.add({id:e.courseDetails.id,shortname:e.courseDetails.shortname,fullname:e.courseDetails.fullname,level_one:e.courseDetails.level_one,level_two:e.courseDetails.level_two,startdate:e.courseDetails.startdate,visible:+e.courseDetails.visible}).draw(!1)})}),e[0].fail(function(n){a.get_string("error","error").done(function(t){a.get_string("ok","moodle").done(function(o){var e=r("#new_course_short_name_input")[0].value;a.get_string("shortnametaken","error",e).done(function(e){e="Possible problem: "+e+"<br><br>";n.message&&(e+="Error-Message:<br>"+n.message+"<br><br>"),n.debuginfo&&(e+="Debuginfo:<br>"+n.debuginfo+"<br><br>"),s.alert(t,e,o)})})})})})},duplicateCourse:function(){r("#duplicate_course_button").on("click",function(){var e=o.call([{methodname:"tool_supporter_duplicate_course",args:{courseid:r("#selectedcourseid")[0].textContent}}]);a.get_string("beingduplicated","tool_supporter").done(function(e){s.addNotification({message:e,type:"info"})}),e[0].done(function(e){t.showCourseDetail(e.id,!0)[0].done(function(e){r("#courseTable").DataTable().row.add({id:e.courseDetails.id,shortname:e.courseDetails.shortname,fullname:e.courseDetails.fullname,level_one:e.courseDetails.level_one,level_two:e.courseDetails.level_two,startdate:e.courseDetails.startdate,visible:+e.courseDetails.visible}).draw(!1)})}).fail(s.exception)})}}});