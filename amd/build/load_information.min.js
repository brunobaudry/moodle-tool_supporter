/**
 * Module witch provides mostly jquery user interactions and ajax calls
 *
 * @module     tool_supporter/load_information
 * @copyright  2019 Benedikt Schneider, Klara Saary
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 * @since      3.1.1
 */
define("tool_supporter/load_information",["jquery","core/ajax","core/templates","core/notification"],(function($,ajax,templates,notification){var showEnrolSection=function(courseID){ajax.call([{methodname:"tool_supporter_get_assignable_roles",args:{courseID:courseID}}],!0,!0)[0].done((function(data){templates.render("tool_supporter/enrolusersection",data).done((function(html,js){$('[data-region="enroluserregion"]').replaceWith(html),$('[data-region="enroluserregion"]').show(),templates.runTemplateJS(js)})).fail(notification.exception)})).fail(notification.exception)},toggleCourseVisibilityPrivate=function(){ajax.call([{methodname:"tool_supporter_toggle_course_visibility",args:{courseID:$("#selectedcourseid")[0].textContent}}],!0,!0)[0].done((function(course){templates.render("tool_supporter/course_detail",course).done((function(html,js){$('[data-region="course_details"]').replaceWith(html),$('[data-region="course_details"]').show(),templates.runTemplateJS(js)})).fail(notification.exception)})).fail(notification.exception)};return{showCourseDetail:function(courseID,boolreturn){"undefined"===boolreturn&&(boolreturn=0);var position=$("#course_details").offset().top;$("html, body").animate({scrollTop:position-50},"slow");var promise=ajax.call([{methodname:"tool_supporter_get_course_info",args:{courseID:courseID}}]);return promise[0].done((function(data){templates.render("tool_supporter/course_detail",data).done((function(html,js){$('[data-region="course_details"]').replaceWith(html),$('[data-region="course_details"]').show(),templates.runTemplateJS(js),1===$("#selecteduserid").length&&showEnrolSection(courseID)})).fail(notification.exception)})).fail(notification.exception),boolreturn?promise:null},toggleCourseVisibility:function(){$("#hide_course_visibility").on("click",(function(){toggleCourseVisibilityPrivate()})),$("#show_course_visibility").on("click",(function(){toggleCourseVisibilityPrivate()}))},toggleUserDetails:function(){$("#btn_hide_user_details, #btn_show_user_details").on("click",(function(){$("#user_details_body").toggle(),$("#btn_hide_user_details").toggle(),$("#btn_show_user_details").toggle()}))},toggleCourseDetails:function(){$("#btn_hide_course_details, #btn_show_course_details").on("click",(function(){$("#course_details_body").toggle(),$("#btn_hide_course_details").toggle(),$("#btn_show_course_details").toggle()}))},clickOnUser:function(tableID){$(tableID+" tbody").on("click","tr",(function(){var userID=$(this).find("td:first-child").text();if(!isNaN(userID)){var dataTable=$(tableID).dataTable()[0];$(dataTable.rows).css("background-color",""),$(this).css("background-color","#bcbcbc");var position=$("#user_details").offset().top;$("html, body").animate({scrollTop:position-50},"slow"),ajax.call([{methodname:"tool_supporter_get_user_information",args:{userid:userID}}])[0].done((function(data){templates.render("tool_supporter/user_detail",data[0]).done((function(html,js){if($('[data-region="user_details"]').replaceWith(html),$('[data-region="user_details"]').show(),$('[data-region="course_details"]').is(":visible")){var courseid=$("#selectedcourseid")[0].textContent;showEnrolSection(courseid)}templates.runTemplateJS(js)})).fail(notification.exception)})).fail(notification.exception)}}))},clickOnCourse:function(tableID){var publicObject=this;$(tableID+" tbody").on("click","tr",(function(){var courseID=$(this).find("td:first-child").text();if(!isNaN(courseID)){var dataTable=$(tableID).dataTable()[0];$(dataTable.rows).css("background-color",""),$(this).css("background-color","#bcbcbc"),publicObject.showCourseDetail(courseID,!1)}}))},clickOnRefresh:function(tableID,methodname,args){$("#btn_refresh_users").on("click",(function(){ajax.call([{methodname:methodname,args:args}])[0].done((function(data){templates.render("tool_supporter/user_table",data).done((function(html,js){$('[data-region="user_table"]').replaceWith(html),templates.runTemplateJS(js)})).fail(notification.exception)})).fail(notification.exception)})),$("#btn_refresh_courses").on("click",(function(){ajax.call([{methodname:methodname,args:args}])[0].done((function(data){templates.render("tool_supporter/course_table",data).done((function(html,js){$('[data-region="course_table"]').replaceWith(html),templates.runTemplateJS(js)})).fail(notification.exception)})).fail(notification.exception)}))}}}));

//# sourceMappingURL=load_information.min.js.map