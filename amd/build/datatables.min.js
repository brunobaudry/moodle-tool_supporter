define(["jquery","tool_supporter/jquery.dataTables","core/str","tool_supporter/table_filter","core/ajax","core/notification","core/templates"],function(a,e,u,t,r,_,c){function i(e,o){if(void 0!==o)for(var r=0;r<o.length;r++)t.filterEvent(o[r][0],o[r][1],o[r][2],e)}return{useDataTable:function(t,s){r.call([{methodname:"tool_supporter_get_settings",args:{}}],!0,!0)[0].done(function(r){var e=u.get_string("noresults","admin"),o=u.get_string("search","moodle");a.when(e,o).done(function(e,o){o={retrieve:!0,responsive:!0,lengthChange:!0,language:{info:"",search:o+": ",lengthMenu:"_MENU_",zeroRecords:e},dom:"<'row'<'col-sm-6'><'col-sm-6'f>><'row'<'col-sm-12't>><'row'<'col-sm-4'><'col-sm-3'p><'col-sm-3'><'col-sm-1'l>>",pagingType:"numbers"};"#userincourse"==t&&(o.order=[[0,r.tool_supporter_course_details_order]],o.pageLength=r.tool_supporter_course_details_pagelength,o.lengthMenu=[r.tool_supporter_course_details_pagelength,10,25,50,100]),"#userdetailcourses"==t&&(o.order=[[0,r.tool_supporter_user_details_order]],o.pageLength=r.tool_supporter_user_details_pagelength,o.lengthMenu=[r.tool_supporter_user_details_pagelength,10,25,50,100]),a(t).DataTable(o),i(t,s)})})},dataTableAjax:function(s,e,o,l,n){r.call([{methodname:e,args:o}],!0,!0)[0].done(function(t){r.call([{methodname:"tool_supporter_get_settings",args:{}}],!0,!0)[0].done(function(r){var e=u.get_string("noresults","admin"),o=u.get_string("search","moodle");a.when(e,o).done(function(e,o){o={data:t[l],columns:n,retrieve:!0,responsive:!0,lengthChange:!0,deferRender:!0,language:{info:" ",search:o+": ",lengthMenu:"_MENU_",zeroRecords:e},dom:"<'col-sm-12't><'row'<'col-sm-4'><'col-sm-3'p><'col-sm-3'><'col-sm-1'l>>",paging:!0,pagingType:"numbers",processing:!0,initComplete:function(){a(s+"-loadingIcon").hide(),"#courseTable"==s&&(a("#course_table_filtering").css("visibility","visible"),c.render("tool_supporter/course_table",t).done(function(e){e=a('[data-region="course_filtering"]',a(e));a('[data-region="course_filtering"]').replaceWith(e[0].outerHTML),i(s,[["courses_levelonecheckbox","#courses_levelonedropdown",3],["courses_leveltwocheckbox","#courses_leveltwodropdown",4],["courses_levelthreecheckbox","#courses_levelthreedropdown",5],["courses_levelfourcheckbox","#courses_levelfourdropdown",6],["courses_levelfivecheckbox","#courses_levelfivedropdown",7]])}).fail(_.exception)),s.includes("#userTable")&&a("#users_dynamic_search").css("visibility","visible")}};"#courseTable"==s&&(o.order=[[0,r.tool_supporter_course_table_order]],o.pageLength=r.tool_supporter_course_table_pagelength,o.lengthMenu=[r.tool_supporter_course_table_pagelength,10,25,50,100]),"#userTable"==s&&(o.order=[[0,r.tool_supporter_user_table_order]],o.pageLength=r.tool_supporter_user_table_pagelength,o.lengthMenu=[r.tool_supporter_user_table_pagelength,10,25,50,100]),a(s).DataTable(o)})})}).fail(_.exception)}}});