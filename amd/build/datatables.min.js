/**
 * This module provides setttings and implements
 * the dataTabes Plugin
 *
 * @module     tool_supporter/datatables
 * @copyright  2019 Klara Saary, Benedikt Schneider
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 * @since      3.1.1
 */
define("tool_supporter/datatables",["jquery","tool_supporter/jquery.dataTables","core/str","tool_supporter/table_filter","core/ajax","core/notification","core/templates"],(function($,datatables,str,filter,ajax,notification,templates){var useFilters=function(tableID,filterSelector){if(void 0!==filterSelector)for(var i=0;i<filterSelector.length;i++)filter.filterEvent(filterSelector[i][0],filterSelector[i][1],filterSelector[i][2],tableID)};return{useDataTable:function(tableID,filterSelector){ajax.call([{methodname:"tool_supporter_get_settings",args:{}}],!0,!0)[0].done((function(settings){var stringNoResults=str.get_string("noresults","admin"),stringSearch=str.get_string("search","moodle");$.when(stringNoResults,stringSearch).done((function(noResultsString,searchString){var options={retrieve:!0,responsive:!0,lengthChange:!0,language:{info:"",search:searchString+": ",lengthMenu:"_MENU_",zeroRecords:noResultsString},dom:"<'row'<'col-sm-6'><'col-sm-6'f>><'row'<'col-sm-12't>><'row'<'col-sm-4'><'col-sm-3'p><'col-sm-3'><'col-sm-1'l>>",pagingType:"numbers"};"#userincourse"==tableID&&(options.order=[[0,settings.tool_supporter_course_details_order]],options.pageLength=settings.tool_supporter_course_details_pagelength,options.lengthMenu=[settings.tool_supporter_course_details_pagelength,10,25,50,100]),"#userdetailcourses"==tableID&&(options.order=[[0,settings.tool_supporter_user_details_order]],options.pageLength=settings.tool_supporter_user_details_pagelength,options.lengthMenu=[settings.tool_supporter_user_details_pagelength,10,25,50,100]),$(tableID).DataTable(options),useFilters(tableID,filterSelector)}))}))},dataTableAjax:function(tableID,methodname,args,datainfo,columns){ajax.call([{methodname:methodname,args:args}],!0,!0)[0].done((function(data){ajax.call([{methodname:"tool_supporter_get_settings",args:{}}],!0,!0)[0].done((function(settings){var stringNoResults=str.get_string("noresults","admin"),stringSearch=str.get_string("search","moodle");$.when(stringNoResults,stringSearch).done((function(noResultsString,searchString){var options={data:data[datainfo],columns:columns,retrieve:!0,responsive:!0,lengthChange:!0,deferRender:!0,language:{info:" ",search:searchString+": ",lengthMenu:"_MENU_",zeroRecords:noResultsString},dom:"<'col-sm-12't><'row'<'col-sm-4'><'col-sm-3'p><'col-sm-3'><'col-sm-1'l>>",paging:!0,pagingType:"numbers",processing:!0,initComplete:function(){$(tableID+"-loadingIcon").hide(),"#courseTable"==tableID&&($("#course_table_filtering").css("visibility","visible"),templates.render("tool_supporter/course_table",data).done((function(html){var anchor=$('[data-region="course_filtering"]',$(html));$('[data-region="course_filtering"]').replaceWith(anchor[0].outerHTML),useFilters(tableID,[["courses_levelonecheckbox","#courses_levelonedropdown",3],["courses_leveltwocheckbox","#courses_leveltwodropdown",4]])})).fail(notification.exception)),tableID.includes("#userTable")&&$("#users_dynamic_search").css("visibility","visible")}};"#courseTable"==tableID&&(options.order=[[0,settings.tool_supporter_course_table_order]],options.pageLength=settings.tool_supporter_course_table_pagelength,options.lengthMenu=[settings.tool_supporter_course_table_pagelength,10,25,50,100]),"#userTable"==tableID&&(options.order=[[0,settings.tool_supporter_user_table_order]],options.pageLength=settings.tool_supporter_user_table_pagelength,options.lengthMenu=[settings.tool_supporter_user_table_pagelength,10,25,50,100]),$(tableID).DataTable(options)}))}))})).fail(notification.exception)}}}));

//# sourceMappingURL=datatables.min.js.map